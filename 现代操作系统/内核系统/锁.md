# 锁

## 锁的粒度

加锁粒度，用来描述加锁保护的数据规模

当锁的争用问题变的严重的时候，设计就向细粒度的方向进化

## linux内核锁的类型

+ 自选锁 spin_lock
一个请求它的线程会发生自旋，所以浪费处理器时间，只适合短时间持有锁

容易死锁
+ 读写自选锁

rw——lock


+ 信号量————睡眠锁

会让其它请求锁的线程睡眠，适合长时间持有锁

   + 互斥信号量

   + 计数信号量
      计数多个请求线程

   + 读写信号量


+ 互斥体mutex
 和互斥信号量很相似，支持debug，优先使用互斥体

+ 顺序锁 seq锁
适合，写优先与读、读多余写